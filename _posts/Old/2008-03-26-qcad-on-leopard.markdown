---
layout: post
status: publish
published: true
title: QCad on Leopard
author: Hans
author_login: fugalh
author_email: hans@fugal.net
author_url: http://hans.fugal.net/
wordpress_id: 947
wordpress_url: urn:uuid:e95f31a0-a240-4a57-b137-63bb0225f4fb
date: '2008-03-26 09:01:42.000000000 -07:00'
tags:
- mac
- qt
- leopard
- gcc
- qcad
comments:
- id: 1731
  author: Brian C
  author_email: brianjcorry@yahoo.ie
  author_url: ''
  date: '2008-03-28 10:26:51 -0700'
  date_gmt: ''
  content: |-
    <p>Dear Hans
    Your QCad.app works fine on Intel IMac.</p>

    <p>Many Thanks
    Brian Corry, Ireland</p>
- id: 1732
  author: M.Hanada
  author_email: flower_room@mac.com
  author_url: ''
  date: '2008-05-23 00:53:15 -0700'
  date_gmt: ''
  content: |-
    <p>Great Job!!
    I want to be a Hacker like you.
    Thank you!</p>

    <p>Moto Hanada, Japan</p>
- id: 1733
  author: Dustin
  author_email: vieuxnez+fugal@gmail.com
  author_url: http://web.mac.com/mac_vieuxnez/CYCLES
  date: '2008-09-13 07:16:19 -0700'
  date_gmt: ''
  content: <p>Thank you for enabling my laziness.  </p>
- id: 1734
  author: JF
  author_email: ''
  author_url: ''
  date: '2008-09-16 09:15:53 -0700'
  date_gmt: ''
  content: <p>Thank you. Works nice on macbook 10.5.5</p>
- id: 1735
  author: Mark M
  author_email: ''
  author_url: ''
  date: '2009-01-07 18:10:01 -0800'
  date_gmt: ''
  content: <p>Hans - this is awesome, thank you!</p>
- id: 1895
  author: McD
  author_email: mcd@att.net
  author_url: ''
  date: '2009-03-05 19:54:57 -0800'
  date_gmt: '2009-03-05 19:54:57 -0800'
  content: I am in your debt!  Thanks!
- id: 2125
  author: Alex
  author_email: ''
  author_url: ''
  date: '2009-09-21 21:51:05 -0700'
  date_gmt: '2009-09-21 21:51:05 -0700'
  content: Perfect! Thanx a lot
- id: 2159
  author: hc
  author_email: ''
  author_url: http://glenferrieyouth.blogspot.com
  date: '2009-12-29 03:25:40 -0800'
  date_gmt: '2009-12-29 03:25:40 -0800'
  content: "thanks a lot.\r\n i had a quick at building it myself and had all sorts
    of problems\r\nxD"
- id: 2172
  author: Caleb
  author_email: phrdrakhon@aol.com
  author_url: ''
  date: '2010-02-12 17:31:00 -0800'
  date_gmt: '2010-02-12 17:31:00 -0800'
  content: Have you ever considered contributing to macports? I don't know how long
    this took you, but the product is evidently suitable and functional on a number
    of OS versions and machines. We need people like you to make open source applications
    mac friendly. Great job!
- id: 2173
  author: Hans
  author_email: hans@fugal.net
  author_url: http://hans.fugal.net/
  date: '2010-02-12 20:01:27 -0800'
  date_gmt: '2010-02-12 20:01:27 -0800'
  content: "I've done enough Tcl for one lifetime. But I'd be happy to work closely
    with any macports masochist^Wdeveloper in providing patches, helping test, etc.\r\n\r\nAlso
    I tend to use Qt directly and not from macports, which compounds the development
    environment problem."
- id: 2253
  author: Nathan
  author_email: ''
  author_url: ''
  date: '2010-05-21 01:32:18 -0700'
  date_gmt: '2010-05-21 01:32:18 -0700'
  content: Thanks Hans, appears to be working fine on 10.6.3 (Intel MacBook).
- id: 2276
  author: rvt
  author_email: rvt@dds.nl
  author_url: http://www.rvantwisk.nl
  date: '2010-07-10 02:20:19 -0700'
  date_gmt: '2010-07-10 02:20:19 -0700'
  content: "Hans,\r\n\r\ndo you have experience with debugging QCad on OSX? I am trying
    to make this work from NetBeans but I cannot seem to make it break.\r\n\r\nCompiling
    works fine, and running the app also!\r\n\r\nI am trying make some additions to
    it, and I am at the point where I need more insight on some objects.\r\n\r\nRies"
- id: 2278
  author: rvt
  author_email: rvt@dds.nl
  author_url: ''
  date: '2010-07-15 18:51:20 -0700'
  date_gmt: '2010-07-15 18:51:20 -0700'
  content: Hans, I got it running using X-Code, with netbeans apparently I could get
    it later to debug, but it would just hang at some points (stack issues). With
    X-Code I could make it work fine
- id: 2315
  author: Quicker
  author_email: quinn@kalteisen.com
  author_url: http://kalteisen.com
  date: '2010-10-28 12:30:54 -0700'
  date_gmt: '2010-10-28 12:30:54 -0700'
  content: Fantastic.  Works on my Mac Mini running 10.6.4.  Now I have the same CAD
    on my Linux/Windows and Mac workstations and can finally break free of TurboCAD.
- id: 2407
  author: Joop
  author_email: joop@joop.be
  author_url: http://www.joop.be
  date: '2011-07-25 19:39:13 -0700'
  date_gmt: '2011-07-25 19:39:13 -0700'
  content: "Hans,\r\n\r\nyou deserve a statue!!!"
- id: 2417
  author: ''
  author_email: ''
  author_url: ''
  date: '2011-08-08 04:42:53 -0700'
  date_gmt: '2011-08-08 04:42:53 -0700'
  content: kudos, works great.  thanks.
- id: 2432
  author: Deng-Deng
  author_email: ''
  author_url: ''
  date: '2011-10-20 13:43:18 -0700'
  date_gmt: '2011-10-20 13:43:18 -0700'
  content: It works !!!
- id: 2684
  author: Peres Pereira (Portugal)
  author_email: peresper@gmail.com
  author_url: ''
  date: '2012-08-03 00:12:20 -0700'
  date_gmt: '2012-08-03 00:12:20 -0700'
  content: "Works fine on my Mac Snow Leopard. I do not tried deeply but seems to
    be pretty well.\r\nI feel to be thanks to you. God bless you Hans."
---
<p>I finally got around to building <a href="http://www.ribbonsoft.com/qcad.html">QCad</a> on OS X Leopard. There are two main hurdles: getting Qt3 to build and getting QCad to build.</p>

<p>At first I tried building Qt3 with macports, but building QCad was a royal pain with the X11 version of Qt3 on OS X, for whatever reason. So I tried to install the <code>qt3-mac</code> MacPorts package, but that failed. So I was on my own building Qt3.</p>

<p><a href="http://hans.fugal.net/src/qt3-leopard.diff">This patch</a> will allow Qt3 to build on Leopard, by following the instructions in the <code>INSTALL</code> file. Here's the diffstat:</p>

<pre><code> config.tests/mac/mac_version.test |    2 +-
 src/kernel/qcursor_mac.cpp        |    4 ++++
 src/kernel/qt_mac.h               |    2 +-
 src/tools/qglobal.h               |    5 ++++-
 4 files changed, 10 insertions(+), 3 deletions(-)
</code></pre>

<p>I put it in <code>/Developer/qt3</code>, and I wrote a script to source on demand rather
than setting QTDIR and friends in my <code>.profile</code> or <code>.bashrc</code>, since I more
often want Qt4 than Qt3. I configure with <code>-static</code>, so applications like QCad
are built with Qt3 statically, which just makes things work better.</p>

<p>QCad needs <a href="http://hans.fugal.net/src/qcad-leopard.diff">a patch</a> as well:</p>

<pre><code>Index: qcad-2.0.5.0-1-community.src/mkspecs/defs.pro
===================================================================
--- qcad-2.0.5.0-1-community.src.orig/mkspecs/defs.pro  2008-03-26 08:46:25.000000000 -0600
+++ qcad-2.0.5.0-1-community.src/mkspecs/defs.pro       2008-03-26 08:46:48.000000000 -0600
@@ -1,6 +1,6 @@
 # $Id: defs.pro 606 2004-12-25 03:08:40Z andrew $
-QMAKE_CXXFLAGS_DEBUG += -pedantic
-QMAKE_CXXFLAGS += -pedantic
+#QMAKE_CXXFLAGS_DEBUG += -pedantic
+#QMAKE_CXXFLAGS += -pedantic

 win32 {
   QMAKE_CFLAGS_THREAD -= -mthreads
Index: qcad-2.0.5.0-1-community.src/scripts/build_qcad.sh
===================================================================
--- qcad-2.0.5.0-1-community.src.orig/scripts/build_qcad.sh     2008-03-26 08:46:06.000000000 -0600
+++ qcad-2.0.5.0-1-community.src/scripts/build_qcad.sh  2008-03-26 08:46:49.000000000 -0600
@@ -30,7 +30,7 @@ then
     export MAKE=gmake
     echo "Platform is Solaris"
     platform=solaris
-elif [ "x$OSTYPE" == "xdarwin8.0" ]
+elif [ "x$OSTYPE" == "xdarwin8.0" -o "x$OSTYPE" == "xdarwin9.0" ]
 then
     export MAKE=make
     echo "Platform is Mac OS X"
</code></pre>

<p>Then do</p>

<pre><code>cd scripts
./build_qcad.sh notrans
</code></pre>

<p>It will complain about not finding <code>qm/*.qm</code>, but that's a nonfatal error.
QCad.app will be in the <code>qcad</code> directory, ready for your use.</p>

<p>I built this on an Intel MacBook running Leopard. If you think that matches
your setup, you're free to download <a href="http://hans.fugal.net/src/QCad.app.tgz">my QCad.app</a> and avoid
building both Qt3 and QCad.</p>
